<mxGraphModel>
  <root>
    <mxCell id="0"/>
    <mxCell id="1" parent="0"/>
    
    <!-- Title -->
    <mxCell id="title" value="DA3 Serverless Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="280" y="20" width="240" height="30" as="geometry"/>
    </mxCell>
    
    <!-- Client Layer -->
    <mxCell id="client" value="API Client" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=14;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="340" y="80" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Infrastructure Layer Container -->
    <mxCell id="infra_container" value="Docker Container (CUDA 12.8.1, Ubuntu 24.04)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;dashed=1" vertex="1" parent="1">
      <mxGeometry x="120" y="170" width="560" height="420" as="geometry"/>
    </mxCell>
    
    <!-- Application Layer Container -->
    <mxCell id="app_container" value="Application Layer (Python 3.12)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="160" y="240" width="480" height="200" as="geometry"/>
    </mxCell>
    
    <!-- RunPod Handler -->
    <mxCell id="handler" value="RunPod Serverless Handler&#xa;(handler.py)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4472C4;strokeColor=#1E5F96;fontColor=#ffffff;fontSize=13;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="340" y="260" width="160" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Bootstrap Script -->
    <mxCell id="bootstrap" value="Bootstrap Script&#xa;(bootstrap.sh)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#5B9BD5;strokeColor=#2E558A;fontColor=#ffffff;fontSize=12;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="180" y="260" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- DA3 Model -->
    <mxCell id="model" value="DA3 Model&#xa;(Depth Anything 3)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4472C4;strokeColor=#1E5F96;fontColor=#ffffff;fontSize=13;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="340" y="345" width="160" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Prefetch Script -->
    <mxCell id="prefetch" value="Prefetch Script&#xa;(prefetch.sh)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#5B9BD5;strokeColor=#2E558A;fontColor=#ffffff;fontSize=12;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="180" y="345" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Virtual Environment -->
    <mxCell id="venv" value="Python Virtual Environment&#xa;(venv/)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#70AD47;strokeColor=#4A7322;fontColor=#ffffff;fontSize=12;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="520" y="260" width="100" height="60" as="geometry"/>
    </mxCell>
    
    <!-- PyTorch -->
    <mxCell id="pytorch" value="PyTorch 2.8.0&#xa;(CUDA Support)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#70AD47;strokeColor=#4A7322;fontColor=#ffffff;fontSize=11;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="520" y="345" width="100" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Data Layer Container -->
    <mxCell id="data_container" value="Data Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="160" y="470" width="480" height="100" as="geometry"/>
    </mxCell>
    
    <!-- HF Cache -->
    <mxCell id="hf_cache" value="HuggingFace Cache&#xa;(HF_HOME/cache)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#A9D08E;strokeColor=#5F7B3F;fontSize=11;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="180" y="500" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Output Images -->
    <mxCell id="output" value="Output Images&#xa;(output_images/)" style="shape=folder;whiteSpace=wrap;html=1;fillColor=#FFD966;strokeColor=#BF8F00;fontSize=11;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="340" y="500" width="160" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Persistent Volume -->
    <mxCell id="volume" value="Persistent Volume&#xa;(Optional)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#A9D08E;strokeColor=#5F7B3F;fontSize=11;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="520" y="500" width="100" height="60" as="geometry"/>
    </mxCell>
    
    <!-- External Services Container -->
    <mxCell id="external_container" value="External Services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;dashed=1" vertex="1" parent="1">
      <mxGeometry x="120" y="620" width="560" height="100" as="geometry"/>
    </mxCell>
    
    <!-- HuggingFace Hub -->
    <mxCell id="hf_hub" value="HuggingFace Hub&#xa;(Model Registry)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ED7D31;strokeColor=#A95C18;fontColor=#ffffff;fontSize=12;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="200" y="650" width="140" height="50" as="geometry"/>
    </mxCell>
    
    <!-- RunPod -->
    <mxCell id="runpod" value="RunPod&#xa;(Serverless Platform)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ED7D31;strokeColor=#A95C18;fontColor=#ffffff;fontSize=12;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="460" y="650" width="140" height="50" as="geometry"/>
    </mxCell>
    
    <!-- Edges/Arrows -->
    <mxCell id="e1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="client" target="handler">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <mxCell id="e2" value="init" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#666666;dashed=1" edge="1" parent="1" source="bootstrap" target="handler">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <mxCell id="e3" value="inference" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="handler" target="model">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <mxCell id="e4" value="load models" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#666666;dashed=1" edge="1" parent="1" source="prefetch" target="hf_cache">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <mxCell id="e5" value="save" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="model" target="output">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <mxCell id="e6" value="download models" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#666666;dashed=1" edge="1" parent="1" source="hf_cache" target="hf_hub">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <mxCell id="e7" value="execute" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#666666;dashed=1" edge="1" parent="1" source="handler" target="runpod">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <mxCell id="e8" value="GPU acceleration" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#666666;dashed=1" edge="1" parent="1" source="model" target="pytorch">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
    <!-- Legend -->
    <mxCell id="legend" value="Legend" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;fontStyle=1" vertex="1" parent="1">
      <mxGeometry x="680" y="80" width="140" height="180" as="geometry"/>
    </mxCell>
    
    <mxCell id="legend1" value="Application Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10" vertex="1" parent="1">
      <mxGeometry x="690" y="105" width="120" height="25" as="geometry"/>
    </mxCell>
    
    <mxCell id="legend2" value="Data Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10" vertex="1" parent="1">
      <mxGeometry x="690" y="135" width="120" height="25" as="geometry"/>
    </mxCell>
    
    <mxCell id="legend3" value="External Services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10" vertex="1" parent="1">
      <mxGeometry x="690" y="165" width="120" height="25" as="geometry"/>
    </mxCell>
    
    <mxCell id="legend4" value="Data Flow" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10" vertex="1" parent="1">
      <mxGeometry x="690" y="195" width="120" height="25" as="geometry"/>
    </mxCell>
    
    <mxCell id="legend5" value="Dependency" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;dashed=1" vertex="1" parent="1">
      <mxGeometry x="690" y="225" width="120" height="25" as="geometry"/>
    </mxCell>
    
  </root>
</mxGraphModel>